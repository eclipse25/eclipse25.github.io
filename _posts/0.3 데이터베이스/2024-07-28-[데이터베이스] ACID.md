---
layout: post
title: "[데이터베이스] ACID"
categories: [0.3 데이터베이스]
tags: [Data, Database, SQL]
---

소프트웨어 엔지니어링 직군의 첫 인터뷰로 AWS에서 Phone Screening 기회를 얻었을 때, ACID에 대한 질문을 받았다. 당시에 네트워크 관련 지식이 많이 부족했는데, 네트워크를 중점적으로 물어본다는 안내를 받아서 1주일간 네트워크 공부에만 집중하느라 원래 주종목(..?)에 가까웠던 데이터베이스 관련 지식들을 잘 정리하지 못했다.
그래서 ACID에 관련된 답변을 좀 허접하게 했는데, 그 중 일관성(Consistency)에 대해서는 아예 다른 답을 해버리고 말았다... 또 격리성에 대해 트랜잭션의 격리 수준에 대해 알고 있는게 있냐는 질문도 받았어서 이에 대해서도 정리해보기로 했다.

## ACID

- ACID는 데이터베이스 트랜잭션의 신뢰성을 보장하기 위한 네 가지 주요 속성을 말한다.
- 원자성(Atomicity), 일관성(Consistency), 고립성(Isolation), 지속성(Durability)을 의미한다.

### **1. 원자성 (Atomicity)**

- 트랜잭션은 모두 성공적으로 완료되거나 전혀 실행되지 않은 것처럼 보장되어야 한다.
- 즉, 트랜잭션의 모든 작업이 완료되거나, 하나라도 실패하면 모든 작업이 취소되어야 합니다.

- **예제**: 은행 계좌 간 송금
  - 트랜잭션: 계좌 A에서 B로 100원을 이체
  - 만약 계좌 A에서 100원이 출금된 후, 계좌 B에 입금하는 과정에서 오류가 발생하면, 트랜잭션 전 계좌 A의 100원이 출금되지 않은 상태로 복구되어야 한다.

### **2. 일관성 (Consistency)**

- 트랜잭션 전후 데이터베이스가 항상 일관된 상태를 유지해야 한다.
- 데이터베이스가 **데이터 무결성 제약 조건**과 **비즈니스 규칙**을 항상 만족하는 상태를 유지하도록 보장한다.
- 쉽게 말하자면, 데이터베이스가 유효한, 문제가 없는 상태를 유지해야 한다는 것이다.

- **예제**: 외래 키 제약 조건
  - 트랜잭션: 자식 테이블에 레코드를 삽입할 때, 참조하는 부모 테이블에 해당 키가 존재해야 한다.

### **3. 고립성 (Isolation)**

- 동시에 여러 트랜잭션이 실행될 때, 각 트랜잭션은 독립적으로 실행된 것처럼 보여야 한다.
- 하나의 트랜잭션이 완료되기 전에 다른 트랜잭션이 그 결과를 참조하거나 변경하지 못하게 한다.

- **예제**: 두 개의 트랜잭션이 동일한 데이터를 읽고 수정
  - 트랜잭션 A: 데이터 X를 100에서 200으로 수정
  - 트랜잭션 B: 데이터 X를 100에서 300으로 수정
  - 트랜잭션 A가 완료되기 전까지 트랜잭션 B는 데이터 X를 읽거나 수정하지 못해야 합니다.

### **4. 지속성 (Durability)**

- 트랜잭션이 성공적으로 완료되면, 그 결과는 영구적으로 반영되어야 한다.
- 시스템 오류가 발생하더라도 데이터베이스에 저장된 데이터는 손실되지 않는다.

- **예제**: 데이터베이스 커밋
  - 트랜잭션: 주문 정보 저장
  - 커밋 후 시스템에 장애가 발생해도 주문 정보는 데이터베이스에 영구적으로 저장되어 있어야 한다.
